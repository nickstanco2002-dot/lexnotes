<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>LexNotes — Law School OS</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@300;400;500&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap" rel="stylesheet"/>
<style>
/* ═══ DESIGN TOKENS ═══════════════════════════════════ */
:root {
  --bg:         #0b0c0e;
  --surface:    #111215;
  --surface2:   #18191e;
  --surface3:   #1f2128;
  --border:     #252830;
  --border2:    #2e3240;
  --accent:     #c9a84c;
  --accent2:    #e4c870;
  --accent-dim: rgba(201,168,76,.11);
  --accent-glow:rgba(201,168,76,.05);
  --text:       #e6e4dc;
  --muted:      #6e7280;
  --dim:        #3e4152;
  --red:        #d95f5f;
  --green:      #4aab78;
  --blue:       #5283e0;
  --purple:     #8f67d8;
  --r:          8px;
}
*{margin:0;padding:0;box-sizing:border-box;}
html,body,#root{height:100%;overflow:hidden;}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);font-size:13px;line-height:1.5;}
input,textarea,select,button{font-family:inherit;color:inherit;}
textarea{resize:none;}
::-webkit-scrollbar{width:4px;height:4px;}
::-webkit-scrollbar-track{background:transparent;}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:99px;}
::-webkit-scrollbar-thumb:hover{background:var(--dim);}

/* ═══ ANIMATIONS ══════════════════════════════════════ */
@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@keyframes fade{from{opacity:0}to{opacity:1}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.25}}
@keyframes recPing{0%,100%{box-shadow:0 0 0 0 rgba(217,95,95,.55)}60%{box-shadow:0 0 0 7px rgba(217,95,95,0)}}
@keyframes shimmer{0%{background-position:-400px 0}100%{background-position:400px 0}}
@keyframes spin{to{transform:rotate(360deg)}}
.afu{animation:fadeUp .16s ease both;}
.af{animation:fade .12s ease both;}

/* ═══ SKELETON SHIMMER ════════════════════════════════ */
.skel{
  background:linear-gradient(90deg,var(--surface2) 25%,var(--surface3) 50%,var(--surface2) 75%);
  background-size:400px 100%;
  animation:shimmer 1.4s ease 2;
  border-radius:4px;
}

/* ═══ LAYOUT ══════════════════════════════════════════ */
.app{display:flex;height:100vh;overflow:hidden;}
.main{flex:1;min-width:0;display:flex;flex-direction:column;overflow:hidden;}
.content{flex:1;overflow:hidden;display:flex;}
.view{display:none;flex:1;overflow:hidden;flex-direction:column;}
.view.active{display:flex;}

/* ═══ SIDEBAR ═════════════════════════════════════════ */
.sidebar{
  width:232px;flex-shrink:0;
  background:var(--surface);
  border-right:1px solid var(--border);
  display:flex;flex-direction:column;
  transition:width .2s ease;
  position:relative;
}
.sidebar.mini{width:52px;}
.logo{padding:16px 16px 14px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;overflow:hidden;}
.logo-icon{
  width:26px;height:26px;border-radius:6px;flex-shrink:0;
  background:var(--accent);display:flex;align-items:center;justify-content:center;
  font-family:'Playfair Display',serif;font-size:13px;font-weight:700;color:#0b0c0e;
}
.logo-words{overflow:hidden;white-space:nowrap;}
.logo-name{font-family:'Playfair Display',serif;font-size:17px;font-weight:700;color:var(--accent);letter-spacing:-.3px;}
.logo-tag{font-size:9px;color:var(--muted);letter-spacing:2px;text-transform:uppercase;font-family:'JetBrains Mono',monospace;}
.sb-section{padding:10px 8px 4px;}
.sb-label{font-size:8.5px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--dim);padding:0 8px;margin-bottom:4px;font-family:'JetBrains Mono',monospace;white-space:nowrap;}
.nav{display:flex;align-items:center;gap:9px;padding:7px 9px;border-radius:var(--r);cursor:pointer;font-size:12.5px;color:var(--muted);transition:all .14s;border:1px solid transparent;white-space:nowrap;user-select:none;position:relative;}
.nav:hover{background:var(--surface2);color:var(--text);}
.nav.on{background:var(--accent-dim);color:var(--accent);border-color:rgba(201,168,76,.18);}
.nav-ic{font-size:14px;width:18px;text-align:center;flex-shrink:0;}
.nav-lbl{flex:1;overflow:hidden;text-overflow:ellipsis;}
.nav-dot{position:absolute;top:7px;right:8px;width:5px;height:5px;border-radius:50%;background:var(--red);}
.cpill{display:flex;align-items:center;gap:7px;padding:6px 9px;border-radius:var(--r);cursor:pointer;font-size:12px;color:var(--muted);transition:all .14s;overflow:hidden;white-space:nowrap;}
.cpill:hover{background:var(--surface2);color:var(--text);}
.cdot{width:7px;height:7px;border-radius:50%;flex-shrink:0;}
.sb-bottom{margin-top:auto;padding:10px;border-top:1px solid var(--border);}
.ucard{display:flex;align-items:center;gap:9px;padding:7px 9px;border-radius:var(--r);cursor:pointer;transition:background .14s;overflow:hidden;white-space:nowrap;}
.ucard:hover{background:var(--surface2);}
.avatar{width:28px;height:28px;border-radius:50%;background:linear-gradient(135deg,var(--accent),#7a5c18);display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;color:#0b0c0e;flex-shrink:0;}
.sb-toggle{position:absolute;right:-10px;top:22px;width:20px;height:20px;border-radius:50%;background:var(--surface2);border:1px solid var(--border2);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:8px;color:var(--muted);z-index:30;transition:all .14s;}
.sb-toggle:hover{background:var(--accent-dim);color:var(--accent);}

/* ═══ TOPBAR ══════════════════════════════════════════ */
.topbar{height:52px;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 20px;gap:12px;background:var(--surface);flex-shrink:0;}
.tb-title{font-family:'Playfair Display',serif;font-size:16px;font-weight:700;flex:1;}
.tb-search{display:flex;align-items:center;gap:7px;background:var(--surface2);border:1px solid var(--border);border-radius:var(--r);padding:6px 11px;width:220px;cursor:text;}
.tb-search input{background:none;border:none;outline:none;font-size:12px;color:var(--text);width:100%;}
.tb-search input::placeholder{color:var(--dim);}
.tb-search-icon{font-size:12px;color:var(--muted);}

/* ═══ BUTTONS ═════════════════════════════════════════ */
.btn{padding:6px 13px;border-radius:6px;font-size:12px;font-weight:500;border:1px solid transparent;transition:all .14s;cursor:pointer;display:inline-flex;align-items:center;gap:5px;white-space:nowrap;outline:none;}
.btn-primary{background:var(--accent);color:#0b0c0e;font-weight:600;}
.btn-primary:hover{background:var(--accent2);}
.btn-ghost{background:transparent;color:var(--muted);border-color:var(--border);}
.btn-ghost:hover{background:var(--surface2);color:var(--text);}
.btn-ghost-danger{background:transparent;color:var(--red);border-color:rgba(217,95,95,.3);}
.btn-ghost-danger:hover{background:rgba(217,95,95,.08);}
.btn-sm{padding:4px 9px;font-size:11px;}
.btn-icon{width:28px;height:28px;padding:0;justify-content:center;}

/* ═══ INPUTS ══════════════════════════════════════════ */
.inp{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:8px 11px;font-size:12.5px;outline:none;transition:border-color .14s;}
.inp:focus{border-color:var(--accent);}
.inp::placeholder{color:var(--dim);}
.sel{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:8px 11px;font-size:12.5px;outline:none;}
.lbl{font-size:9.5px;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);font-family:'JetBrains Mono',monospace;margin-bottom:5px;display:block;}

/* ═══ CHIPS / BADGES ══════════════════════════════════ */
.chip{display:inline-flex;align-items:center;gap:3px;padding:2px 7px;border-radius:99px;font-size:9.5px;font-weight:600;letter-spacing:.4px;font-family:'JetBrains Mono',monospace;}
.chip-gold{background:var(--accent-dim);color:var(--accent);border:1px solid rgba(201,168,76,.22);}
.chip-blue{background:rgba(82,131,224,.1);color:var(--blue);border:1px solid rgba(82,131,224,.22);}
.chip-red{background:rgba(217,95,95,.1);color:var(--red);border:1px solid rgba(217,95,95,.22);}
.chip-green{background:rgba(74,171,120,.1);color:var(--green);border:1px solid rgba(74,171,120,.22);}
.chip-purple{background:rgba(143,103,216,.1);color:var(--purple);border:1px solid rgba(143,103,216,.22);}
.chip-dim{background:var(--surface2);color:var(--muted);border:1px solid var(--border);}

/* ═══ MODAL ═══════════════════════════════════════════ */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:800;display:flex;align-items:center;justify-content:center;animation:fade .15s ease;}
.modal{background:var(--surface);border:1px solid var(--border2);border-radius:12px;width:100%;max-height:88vh;overflow-y:auto;box-shadow:0 24px 80px rgba(0,0,0,.7);}
.modal-sm{max-width:420px;}
.modal-md{max-width:540px;}
.modal-lg{max-width:740px;}
.mhd{padding:18px 20px 14px;border-bottom:1px solid var(--border);display:flex;align-items:flex-start;justify-content:space-between;}
.mhd-title{font-family:'Playfair Display',serif;font-size:17px;font-weight:700;}
.mhd-sub{font-size:11px;color:var(--muted);margin-top:2px;}
.mclose{width:24px;height:24px;border-radius:5px;background:var(--surface2);border:1px solid var(--border);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted);}
.mclose:hover{color:var(--text);}
.mbody{padding:18px 20px 20px;display:flex;flex-direction:column;gap:13px;}
.frow{display:flex;gap:10px;}
.ff{display:flex;flex-direction:column;flex:1;}
.choices{display:flex;gap:6px;flex-wrap:wrap;}
.choice{padding:5px 11px;border-radius:6px;border:1px solid var(--border);background:var(--surface2);color:var(--muted);font-size:11.5px;cursor:pointer;transition:all .12s;}
.choice:hover{border-color:var(--accent);color:var(--text);}
.choice.picked{border-color:var(--accent);background:var(--accent-dim);color:var(--accent);}

/* ═══ TOAST ═══════════════════════════════════════════ */
.toast-stack{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:999;display:flex;flex-direction:column;gap:6px;align-items:center;pointer-events:none;}
.toast{background:var(--surface3);border:1px solid var(--border2);border-radius:8px;padding:9px 15px;font-size:12px;box-shadow:0 4px 18px rgba(0,0,0,.5);animation:fadeUp .2s ease;white-space:nowrap;}

/* ═══ PANEL COLLAPSE BTN ══════════════════════════════ */
.pcol{position:absolute;right:-10px;top:50%;transform:translateY(-50%);width:20px;height:20px;border-radius:50%;background:var(--surface2);border:1px solid var(--border2);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:8px;color:var(--muted);z-index:20;transition:all .14s;}
.pcol:hover{background:var(--accent-dim);color:var(--accent);}

/* ═══ FOCUS BAR ═══════════════════════════════════════ */
.focus-bar{display:flex;align-items:center;gap:9px;padding:7px 16px;background:var(--surface);border-bottom:1px solid var(--border);flex-shrink:0;}

/* ═══ DASHBOARD ═══════════════════════════════════════ */
.dash-scroll{flex:1;overflow-y:auto;}
.dash-hero{padding:20px 24px 14px;display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:10px;}
.greeting{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;}
.greeting-sub{font-size:10.5px;color:var(--muted);margin-top:2px;font-family:'JetBrains Mono',monospace;}
.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:0 24px 18px;}
.stat{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:14px 16px;position:relative;overflow:hidden;}
.stat::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:var(--accent);opacity:.45;}
.stat-lbl{font-size:9.5px;text-transform:uppercase;letter-spacing:1.5px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-bottom:6px;}
.stat-val{font-family:'Playfair Display',serif;font-size:28px;font-weight:700;color:var(--accent);line-height:1;}
.stat-meta{font-size:10.5px;color:var(--muted);margin-top:3px;}
.wgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:0 24px 24px;align-content:start;}
.wcard{background:var(--surface);border:1px solid var(--border);border-radius:10px;overflow:hidden;}
.wcard.span2{grid-column:span 2;}
.whead{padding:10px 13px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;}
.wtitle{font-size:8.5px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--dim);font-family:'JetBrains Mono',monospace;}
.wbody{padding:11px 13px;}
.wrow{display:flex;align-items:center;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border);}
.wrow:last-child{border:none;}

/* ═══ NOTES ═══════════════════════════════════════════ */
.notes-layout{flex:1;display:flex;overflow:hidden;}
.course-panel{width:206px;flex-shrink:0;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;position:relative;transition:width .2s ease;overflow:hidden;}
.list-panel{width:256px;flex-shrink:0;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;position:relative;transition:width .2s ease;overflow:hidden;}
.phead{padding:11px 13px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.cgroup-hd{display:flex;align-items:center;justify-content:space-between;padding:6px 13px;cursor:pointer;transition:background .1s;user-select:none;}
.cgroup-hd:hover,.cgroup-hd.on{background:var(--surface2);}
.topic-row{display:flex;align-items:center;padding:5px 13px 5px 26px;font-size:11.5px;color:var(--muted);cursor:pointer;transition:all .1s;border-left:2px solid transparent;}
.topic-row:hover{background:var(--surface2);color:var(--text);}
.topic-row.on{color:var(--accent);border-left-color:var(--accent);background:var(--accent-dim);}
.nfilter{display:flex;gap:4px;padding:7px 9px;border-bottom:1px solid var(--border);flex-wrap:wrap;flex-shrink:0;}
.nfc{padding:2px 7px;border-radius:99px;font-size:10px;font-family:'JetBrains Mono',monospace;color:var(--muted);border:1px solid var(--border);cursor:pointer;transition:all .12s;}
.nfc:hover{color:var(--text);}
.nfc.on{background:var(--accent-dim);color:var(--accent);border-color:rgba(201,168,76,.3);}
.nitem{padding:9px 10px;border-radius:5px;cursor:pointer;border-left:2px solid transparent;margin:2px 5px;transition:background .1s;}
.nitem:hover{background:var(--surface2);}
.nitem.on{background:var(--surface2);border-left-color:var(--accent);border-radius:0 5px 5px 0;margin-left:0;padding-left:11px;}
.nbadge{font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;font-family:'JetBrains Mono',monospace;margin-bottom:3px;}
.ntitle{font-size:12px;font-weight:500;margin-bottom:2px;line-height:1.35;}
.npreview{font-size:10.5px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.ndate{font-size:9.5px;color:var(--dim);margin-top:2px;font-family:'JetBrains Mono',monospace;}
.mbadge{font-size:9px;font-weight:600;padding:2px 6px;border-radius:4px;background:var(--accent-dim);color:var(--accent);border:1px solid rgba(201,168,76,.22);cursor:pointer;font-family:'JetBrains Mono',monospace;}

/* ═══ EDITOR ══════════════════════════════════════════ */
.editor{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.etopbar{padding:8px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px;background:var(--surface);flex-shrink:0;flex-wrap:wrap;}
.earea{flex:1;overflow:hidden;display:flex;}
.escroll{flex:1;overflow-y:auto;padding:40px 0 60px;display:flex;flex-direction:column;align-items:center;}
.ecol{width:100%;max-width:680px;padding:0 44px;}
.etitle{font-family:'Playfair Display',serif;font-size:24px;font-weight:700;background:none;border:none;outline:none;width:100%;margin-bottom:4px;letter-spacing:-.3px;line-height:1.3;color:var(--text);}
.emeta{font-size:10.5px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-bottom:22px;display:flex;gap:10px;flex-wrap:wrap;padding-bottom:16px;border-bottom:1px solid var(--border);}
.ebody{font-size:13.5px;line-height:1.85;color:var(--text);background:none;border:none;outline:none;width:100%;min-height:360px;font-family:'DM Sans',sans-serif;}
.bsec{margin-bottom:20px;}
.blbl{font-size:8.5px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:var(--accent);font-family:'JetBrains Mono',monospace;margin-bottom:5px;display:block;opacity:.85;}
.bta{background:transparent;border:1px solid var(--border);border-radius:6px;padding:9px 12px;font-size:13px;line-height:1.7;color:var(--text);outline:none;width:100%;min-height:56px;font-family:'DM Sans',sans-serif;transition:border-color .14s,background .14s;}
.bta:focus{border-color:rgba(201,168,76,.45);background:rgba(201,168,76,.025);}
.bta::placeholder{color:var(--dim);font-style:italic;}

/* ═══ AI PANEL ════════════════════════════════════════ */
.aipanel{width:272px;flex-shrink:0;border-left:1px solid var(--border);background:var(--surface);display:flex;flex-direction:column;transition:width .2s;}
.aipanel.hide{width:0;overflow:hidden;border:none;}
.aihd{padding:10px 13px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;flex-shrink:0;}
.aititle{font-size:9.5px;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1.5px;font-family:'JetBrains Mono',monospace;display:flex;align-items:center;gap:6px;}
.aidot{width:6px;height:6px;border-radius:50%;background:var(--green);}
.aiscroll{flex:1;overflow-y:auto;padding:11px;}
.aisec{margin-bottom:16px;}
.aisec-lbl{font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-bottom:6px;}
.aicard{background:var(--surface2);border:1px solid var(--border);border-radius:6px;padding:8px 10px;font-size:11.5px;line-height:1.6;color:var(--muted);margin-bottom:5px;cursor:pointer;transition:all .14s;}
.aicard:hover{border-color:rgba(201,168,76,.3);color:var(--text);}
.aicard.tip{background:var(--accent-glow);border-color:rgba(201,168,76,.12);cursor:default;}
.pqopt{padding:5px 9px;border-radius:5px;font-size:11px;cursor:pointer;border:1px solid var(--border);color:var(--muted);transition:all .12s;margin-bottom:4px;}
.pqopt:hover{border-color:var(--accent);color:var(--text);background:var(--accent-dim);}
.pqopt.ok{border-color:var(--green);background:rgba(74,171,120,.08);color:var(--green);}
.pqopt.no{border-color:var(--red);background:rgba(217,95,95,.08);color:var(--red);}

/* ═══ TRANSCRIPT BAR ══════════════════════════════════ */
.tsbar{background:var(--surface);border-top:1px solid var(--border);padding:8px 16px;display:flex;align-items:center;gap:10px;flex-shrink:0;}
.recbtn{width:28px;height:28px;border-radius:50%;background:var(--red);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0;transition:all .2s;}
.recbtn.live{animation:recPing 1.5s infinite;}
.tstxt{font-size:11px;color:var(--muted);flex:1;font-family:'JetBrains Mono',monospace;}
.tstime{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--accent);}

/* ═══ MERGE VIEW ══════════════════════════════════════ */
.mghd{padding:9px 16px;border-bottom:1px solid rgba(201,168,76,.2);display:flex;align-items:center;gap:9px;background:rgba(201,168,76,.04);flex-shrink:0;}
.mgbody{display:flex;flex:1;overflow:hidden;}
.mgpane{flex:1;display:flex;flex-direction:column;border-right:1px solid var(--border);overflow:hidden;}
.mgpane-hd{padding:8px 13px;background:var(--surface2);border-bottom:1px solid var(--border);display:flex;align-items:center;gap:7px;flex-shrink:0;}
.syncmap{width:148px;flex-shrink:0;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;}
.tslink{padding:7px 9px;border-radius:5px;cursor:pointer;margin-bottom:3px;border:1px solid transparent;transition:all .12s;}
.tslink:hover{background:var(--surface2);}
.tslink.hi{background:var(--accent-dim);border-color:rgba(201,168,76,.22);}
.tstlbl{font-size:10px;color:var(--accent);font-family:'JetBrains Mono',monospace;margin-bottom:1px;}
.tslabel{font-size:11px;color:var(--muted);line-height:1.3;}
.tsblock{border-radius:3px;padding:1px 2px;transition:background .2s;margin-bottom:12px;cursor:pointer;}
.tsblock.hi{background:rgba(201,168,76,.07);border-left:2px solid var(--accent);padding-left:7px;}
.tsstamp{color:var(--accent);cursor:pointer;font-family:'JetBrains Mono',monospace;text-decoration:underline;text-underline-offset:2px;}

/* ═══ OUTLINE ═════════════════════════════════════════ */
.outline-doc{max-width:740px;margin:0 auto;padding:36px 44px 56px;}
.otag{font-size:9.5px;font-family:'JetBrains Mono',monospace;letter-spacing:2px;text-transform:uppercase;color:var(--dim);margin-bottom:8px;}
.otitle{font-family:'Playfair Display',serif;font-size:28px;font-weight:700;letter-spacing:-.4px;margin-bottom:4px;}
.ometa{font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace;padding-bottom:20px;border-bottom:1px solid var(--border);margin-bottom:24px;}
.osec{margin-bottom:28px;}
.oh1{font-family:'Playfair Display',serif;font-size:18px;font-weight:700;padding-bottom:6px;border-bottom:1px solid var(--border);margin-bottom:11px;display:flex;align-items:baseline;gap:9px;}
.oh1-n{font-size:10px;font-family:'JetBrains Mono',monospace;color:var(--dim);}
.oh2{font-size:12px;font-weight:700;color:var(--muted);letter-spacing:.3px;margin:13px 0 5px;}
.opt{font-size:13px;line-height:1.75;padding-left:13px;border-left:2px solid var(--border);margin-bottom:6px;}
.cite{color:var(--accent);text-decoration:underline;text-underline-offset:2px;text-decoration-style:dotted;font-style:italic;cursor:pointer;}

/* ═══ PRACTICE ════════════════════════════════════════ */
.pracwrap{flex:1;overflow-y:auto;padding:24px;}
.prachd{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:16px;gap:14px;}
.prgtitle{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;}
.prgsub{font-size:12px;color:var(--muted);margin-top:2px;}
.prgbar{height:3px;background:var(--border);border-radius:99px;width:160px;overflow:hidden;margin-top:5px;}
.prgfill{height:100%;background:var(--accent);border-radius:99px;transition:width .35s ease;}
.qcard{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:22px;margin-bottom:14px;}
.qtopic{font-size:9px;font-family:'JetBrains Mono',monospace;letter-spacing:1.5px;text-transform:uppercase;color:var(--dim);margin-bottom:10px;}
.qtext{font-size:14px;line-height:1.7;font-weight:500;margin-bottom:18px;}
.qopt{padding:10px 14px;border-radius:6px;border:1px solid var(--border);cursor:pointer;font-size:12.5px;color:var(--muted);transition:all .12s;margin-bottom:6px;display:flex;align-items:flex-start;gap:10px;}
.qopt:hover:not(.done){border-color:var(--accent);color:var(--text);background:var(--accent-dim);}
.qopt.ok{border-color:var(--green);background:rgba(74,171,120,.07);color:var(--green);}
.qopt.no{border-color:var(--red);background:rgba(217,95,95,.07);color:var(--red);}
.qletter{width:20px;height:20px;border-radius:4px;background:var(--surface3);display:flex;align-items:center;justify-content:center;font-size:9.5px;font-family:'JetBrains Mono',monospace;font-weight:700;flex-shrink:0;}
.qexplain{background:var(--surface2);border:1px solid var(--border);border-left:3px solid var(--green);border-radius:6px;padding:12px;font-size:12px;line-height:1.65;color:var(--muted);margin-top:10px;animation:fadeUp .2s ease;}

/* ═══ CALENDAR ════════════════════════════════════════ */
.calwrap{flex:1;overflow-y:auto;padding:20px 24px;}
.calhd{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px;flex-wrap:wrap;gap:10px;}
.calmonth{font-family:'Playfair Display',serif;font-size:19px;font-weight:700;}
.calgrid{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:var(--border);border-radius:10px;overflow:hidden;border:1px solid var(--border);}
.caldh{background:var(--surface);padding:8px;text-align:center;font-size:9px;font-family:'JetBrains Mono',monospace;letter-spacing:1px;text-transform:uppercase;color:var(--dim);}
.calcel{background:var(--surface);padding:6px 7px;min-height:82px;cursor:pointer;transition:background .1s;}
.calcel:hover{background:var(--surface2);}
.calcel.today{background:var(--accent-glow);}
.calcel.other{opacity:.3;}
.calnum{font-size:11px;font-family:'JetBrains Mono',monospace;color:var(--dim);margin-bottom:3px;}
.calcel.today .calnum{color:var(--accent);font-weight:700;}
.calev{font-size:9.5px;padding:2px 5px;border-radius:3px;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}

/* ═══ DOCS ════════════════════════════════════════════ */
.docs-layout{flex:1;display:flex;overflow:hidden;}
.docs-main{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.docs-tb{padding:11px 17px;border-bottom:1px solid var(--border);background:var(--surface);display:flex;align-items:center;gap:9px;flex-shrink:0;}
.docs-quick{padding:11px 17px;border-bottom:1px solid var(--border);display:flex;gap:8px;flex-shrink:0;}
.dqbtn{flex:1;background:var(--surface2);border:1px solid var(--border);border-radius:7px;padding:10px;cursor:pointer;text-align:center;transition:border-color .14s,background .14s;}
.dqbtn:hover{border-color:rgba(201,168,76,.35);background:var(--surface3);}
.docs-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(185px,1fr));gap:10px;}
.dcard{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:13px;cursor:pointer;transition:border-color .14s,background .14s;}
.dcard:hover{border-color:rgba(201,168,76,.28);background:var(--surface2);}
.dicon{font-size:21px;margin-bottom:8px;line-height:1;}
.dname{font-size:11.5px;font-weight:600;margin-bottom:3px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
.dmeta{font-size:9.5px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-bottom:7px;}

/* ═══ TEXTBOOKS ═══════════════════════════════════════ */
.tbview{flex:1;display:flex;overflow:hidden;}
.tblib{width:212px;flex-shrink:0;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;transition:width .2s;overflow:hidden;position:relative;}
.tbreader{flex:1;display:flex;flex-direction:column;overflow:hidden;}
.tbtb{padding:7px 13px;border-bottom:1px solid var(--border);background:var(--surface);display:flex;align-items:center;gap:5px;flex-shrink:0;flex-wrap:wrap;}
.tbtg{display:flex;align-items:center;gap:3px;padding:0 7px;border-right:1px solid var(--border);}
.tbtg:last-child{border:none;}
.tbt{width:26px;height:26px;border-radius:5px;border:none;background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted);transition:all .12s;}
.tbt:hover{background:var(--surface2);color:var(--text);}
.tbt.on{background:var(--accent-dim);color:var(--accent);}
.hlsw{width:19px;height:19px;border-radius:3px;cursor:pointer;border:2px solid transparent;transition:all .12s;flex-shrink:0;}
.hlsw:hover,.hlsw.on{border-color:rgba(255,255,255,.3);transform:scale(1.1);}
.pgbtn{width:22px;height:22px;border-radius:3px;border:1px solid var(--border);background:var(--surface2);color:var(--muted);cursor:pointer;font-size:9px;display:flex;align-items:center;justify-content:center;}
.pgbtn:hover{border-color:var(--accent);color:var(--accent);}
.tbrp{flex:1;overflow-y:auto;display:flex;justify-content:center;padding:32px 20px;background:var(--bg);}
.tbpage{width:100%;max-width:720px;background:#16171b;border-radius:3px;padding:48px 58px;font-size:14px;line-height:1.87;color:#d0cec7;box-shadow:0 2px 22px rgba(0,0,0,.35);user-select:text;}
.tbct{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;color:var(--text);margin-bottom:5px;letter-spacing:-.3px;}
.tbst{font-size:11px;font-weight:700;color:var(--muted);letter-spacing:1.5px;text-transform:uppercase;font-family:'JetBrains Mono',monospace;margin:24px 0 10px;}
.tbpage p{margin-bottom:14px;}
.hly{background:rgba(255,214,0,.2);border-bottom:2px solid rgba(255,214,0,.5);}
.hlg{background:rgba(74,171,120,.16);border-bottom:2px solid rgba(74,171,120,.48);}
.hlp{background:rgba(217,95,95,.14);border-bottom:2px solid rgba(217,95,95,.48);}
.hlb{background:rgba(82,131,224,.16);border-bottom:2px solid rgba(82,131,224,.48);}
.tbbook{padding:9px 12px;cursor:pointer;transition:background .1s;border-left:2px solid transparent;display:flex;align-items:flex-start;gap:8px;}
.tbbook:hover{background:var(--surface2);}
.tbbook.on{background:var(--surface2);border-left-color:var(--accent);}
.tbthumb{width:26px;height:36px;border-radius:2px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:14px;}
.tbprog{margin-top:4px;height:2px;background:var(--border);border-radius:99px;overflow:hidden;}
.tbprogf{height:100%;background:var(--accent);}
.tbann{width:250px;flex-shrink:0;background:var(--surface);border-left:1px solid var(--border);display:flex;flex-direction:column;transition:width .2s;}
.tbaitem{padding:9px 10px;border-radius:6px;border:1px solid var(--border);margin-bottom:6px;cursor:pointer;background:var(--surface2);}
.tbaitem:hover{border-color:rgba(201,168,76,.28);}
.tbaquote{font-size:10.5px;line-height:1.5;color:var(--text);margin-bottom:5px;font-style:italic;border-left:2px solid var(--accent);padding-left:7px;}
.tbanote{font-size:10px;color:var(--muted);line-height:1.4;}
.tbameta{font-size:9px;color:var(--dim);font-family:'JetBrains Mono',monospace;margin-top:4px;}
.selpop{position:fixed;background:var(--surface3);border:1px solid var(--border2);border-radius:7px;padding:5px 7px;display:flex;align-items:center;gap:3px;z-index:400;box-shadow:0 5px 20px rgba(0,0,0,.6);}
.selact{padding:4px 8px;border-radius:4px;font-size:10.5px;cursor:pointer;color:var(--muted);border:none;background:transparent;transition:all .1s;}
.selact:hover{background:var(--surface2);color:var(--text);}
.seldiv{width:1px;height:13px;background:var(--border);}
.selhl{width:15px;height:15px;border-radius:3px;cursor:pointer;border:1px solid transparent;}
.selhl:hover{transform:scale(1.15);border-color:rgba(255,255,255,.2);}

/* ═══ INTEGRATIONS ════════════════════════════════════ */
.intwrap{flex:1;overflow-y:auto;padding:24px;}
.intgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(275px,1fr));gap:12px;margin:16px 0;}
.intcard{background:var(--surface);border:1px solid var(--border);border-radius:11px;padding:16px;transition:border-color .14s;}
.intcard:hover{border-color:rgba(201,168,76,.18);}
.intcard.conn{border-color:rgba(74,171,120,.18);}
.inticon{width:40px;height:40px;border-radius:9px;display:flex;align-items:center;justify-content:center;font-size:19px;margin-bottom:10px;}
.intname{font-size:13px;font-weight:600;margin-bottom:4px;}
.intdesc{font-size:11.5px;color:var(--muted);line-height:1.6;margin-bottom:10px;}
.intstatus{display:flex;align-items:center;gap:5px;font-size:11px;}
.sdot{width:6px;height:6px;border-radius:50%;}

/* ═══ API MAP ══════════════════════════════════════════ */
.apiwrap{flex:1;overflow-y:auto;padding:24px;}
.apigrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:13px;}
.apicard{background:var(--surface);border:1px solid var(--border);border-radius:11px;padding:16px;}
.apibadge{padding:3px 7px;border-radius:4px;font-size:8.5px;font-weight:700;letter-spacing:1px;text-transform:uppercase;font-family:'JetBrains Mono',monospace;}
.apibadge.core{background:var(--accent-dim);color:var(--accent);}
.apibadge.ai{background:rgba(82,131,224,.1);color:var(--blue);}
.apibadge.sync{background:rgba(74,171,120,.1);color:var(--green);}
.apibadge.db{background:rgba(143,103,216,.1);color:var(--purple);}
.apiname{font-size:13.5px;font-weight:600;margin:8px 0 5px;}
.apipurpose{font-size:11.5px;color:var(--muted);line-height:1.6;margin-bottom:10px;}
.apieps{display:flex;flex-direction:column;gap:4px;}
.ep{display:flex;align-items:center;gap:7px;font-size:10.5px;}
.meth{padding:2px 5px;border-radius:3px;font-family:'JetBrains Mono',monospace;font-size:8.5px;font-weight:700;min-width:38px;text-align:center;}
.meth.get{background:rgba(74,171,120,.1);color:var(--green);}
.meth.post{background:rgba(82,131,224,.1);color:var(--blue);}
.meth.patch{background:var(--accent-dim);color:var(--accent);}
.meth.del{background:rgba(217,95,95,.1);color:var(--red);}
.epath{font-family:'JetBrains Mono',monospace;color:var(--muted);font-size:10px;}
.apisep{height:1px;background:var(--border);margin:9px 0;}
.apiowner{font-size:10px;color:var(--dim);font-family:'JetBrains Mono',monospace;}

/* ═══ SETTINGS ════════════════════════════════════════ */
.setwrap{flex:1;overflow-y:auto;padding:24px;}
.setgrid{display:grid;grid-template-columns:1fr 2fr;gap:20px;max-width:860px;}
.setnav{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:8px;}
.setsection{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:20px;display:flex;flex-direction:column;gap:16px;}
.setrow{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border);}
.setrow:last-child{border:none;}
.toggle-track{width:36px;height:20px;border-radius:99px;background:var(--border);cursor:pointer;position:relative;transition:background .2s;flex-shrink:0;}
.toggle-track.on{background:var(--accent);}
.toggle-thumb{width:16px;height:16px;border-radius:50%;background:white;position:absolute;top:2px;left:2px;transition:left .2s;}
.toggle-track.on .toggle-thumb{left:18px;}

/* View-level horizontal layouts must override .view { flex-direction: column; } */
.notes-layout,.docs-layout,.tbview{flex-direction:row;}

@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{
    animation:none !important;
    transition:none !important;
  }
}
</style>
</head>
<body>
<div id="root"></div>
<script id="lexnotes-app-source" type="text/plain"></script>
<script>
(function(){
  const root=document.getElementById('root');
  function showBootError(msg){
    if(!root)return;
    root.innerHTML=
      '<div style="height:100vh;display:grid;place-items:center;background:#0b0c0e;color:#e6e4dc;font-family:DM Sans,system-ui,sans-serif;padding:20px">'+
        '<div style="max-width:680px;width:100%;background:#111215;border:1px solid #252830;border-radius:12px;padding:18px">'+
          '<div style="font-size:20px;font-weight:700;margin-bottom:8px">LexNotes failed to start</div>'+
          '<div style="font-size:13px;color:#6e7280;line-height:1.6;margin-bottom:12px">'+msg+'</div>'+
          '<div style="display:flex;gap:8px;flex-wrap:wrap">'+
            '<button id="lexnotes-retry" style="padding:8px 12px;border-radius:6px;border:1px solid #2e3240;background:transparent;color:#e6e4dc;cursor:pointer">Retry</button>'+
            '<a href="/" style="padding:8px 12px;border-radius:6px;background:#c9a84c;color:#0b0c0e;text-decoration:none;font-weight:700">Reload App</a>'+
          '</div>'+
        '</div>'+
      '</div>';
    const btn=document.getElementById('lexnotes-retry');
    if(btn)btn.onclick=()=>window.location.reload();
  }

  function loadScript(url){
    return new Promise((resolve,reject)=>{
      const s=document.createElement('script');
      s.src=url;
      s.async=true;
      s.onload=()=>resolve(url);
      s.onerror=()=>reject(new Error('Failed '+url));
      document.head.appendChild(s);
    });
  }

  async function loadWithFallback(urls,name){
    let lastErr=null;
    for(const u of urls){
      try{return await loadScript(u);}catch(err){lastErr=err;}
    }
    throw new Error(name+' could not be loaded');
  }

  async function boot(){
    try{
      await loadWithFallback([
        'https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js',
        'https://unpkg.com/react@18.2.0/umd/react.production.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js'
      ],'React');
      await loadWithFallback([
        'https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js',
        'https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js'
      ],'ReactDOM');
      await loadScript('/lexnotes-app.compiled.js');
    }catch(err){
      showBootError((err&&err.message)||'Unknown startup error');
    }
  }
  boot();
})();
</script>
</body>
</html>
